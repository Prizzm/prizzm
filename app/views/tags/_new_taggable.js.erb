var data = [
  {value: "have", name: "have"}
];

$('#<%= object_type(taggable)%>_tag_list').autoSuggest(data,
  {
    asHtmlID       : 'tag_list', 
    startText      : "+ Add tags",
    neverSubmit    : true,
    selectionAdded : function(element){
      var $tag_added = $(element),
          $tag_list  = $('#as-values-tag_list');

      if ($tag_list.val().match(new RegExp('(?:^|,)'+$tag_added.text()+'(?=,|$)', 'g')).length > 1) {
        $tag_added.remove();
        $tag_list.val($tag_list.val().replace(new RegExp($tag_added.text()+','), ''));
      }

      console.log($tag_list.val());

      $('#tag_list').val($('#as-values-tag_list').val());
    },

    selectionRemoved: function(element){
      element.fadeTo("fast", 0, function(){
        element.remove();
        var tag_list = $('#as-values-tag_list').val();
        $('#tag_list').val(tag_list);
        tag_list = $('#tag_list').val();
        console.log(tag_list);
      });
    }
});

$("#item_tag_list").autoSuggest(data.items, {
    preFill: "have",
    neverSubmit: true
});
